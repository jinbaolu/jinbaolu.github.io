(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{390:function(t,s,a){t.exports=a.p+"assets/img/image-iphonex.cd021718.png"},434:function(t,s,a){"use strict";a.r(s);var n=a(29),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"iphonx-安全区适配"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iphonx-安全区适配"}},[t._v("#")]),t._v(" iphonx 安全区适配")]),t._v(" "),n("h2",{attrs:{id:"背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),n("p",[t._v("刘海屏 - 安全区域")]),t._v(" "),n("ul",[n("li",[t._v("针对机型： 苹果系统 iPhoneX 及以上机型")]),t._v(" "),n("li",[t._v("问题描述：核心内容应该处于安全区域（safe area） 确保不会被设备圆角(corners)，传感器外壳(sensor housing，刘海) 以及底部的小黑条(home indicator)遮挡。")]),t._v(" "),n("li",[t._v("安全区不可展示按钮等与用户交互的 ui，否则很容易造成误操作")])]),t._v(" "),n("img",{attrs:{src:a(390)}}),t._v(" "),n("h2",{attrs:{id:"解决办法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),n("ul",[n("li",[t._v("检测屏幕宽高")])]),t._v(" "),n("p",[t._v("当前的 iPhoneX 及以上的全部 7 种机型的物理屏幕宽高共有两种：375 x 812 和 414 x 896，检测屏幕的宽高后判断是否是 iphonex 及以上机型，针对此机型做底部安全区适配，抬高 68px")]),t._v(" "),n("ul",[n("li",[t._v("viewport-fit + safe-area-inset-*")])]),t._v(" "),n("p",[t._v("viewport-fit：")]),t._v(" "),n("p",[t._v("viewport-fit 标签共有三个值：contain, cover, auto。默认 auto 的表现同 contain。")]),t._v(" "),n("p",[t._v("在非矩形屏幕上，视口边界框（Viewport Bounding Box）的面积超出屏幕显示区域，从而产生剪切。设置 viewport-fit=cover，使屏幕利用率更高")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("注意：只有在设置 viewport-fit=cover 时，safe-area-inset-*等属性才会起作用。")]),t._v(" "),n("p",[t._v('<meta name="viewport" content="viewport-fit=cover">')])]),t._v(" "),n("p",[t._v("safe-area-inset-*")]),t._v(" "),n("p",[t._v("constant()：")]),t._v(" "),n("p",[t._v("通过 CSS 的 constant() 函数，我们可以获得 iPhoneX 系列机型安全区域距离边界的距离，安全区域就是中间确定能完全显示的区域。\n// 注意以下长度单位均为 px")]),t._v(" "),n("p",[t._v("constant(safe-area-inset-top) // 在 Viewport 顶部的安全区域内设置量")]),t._v(" "),n("p",[t._v("constant(safe-area-inset-bottom) // 在 Viewport 底部的安全区域内设置量")]),t._v(" "),n("p",[t._v("constant(safe-area-inset-left) // 在 Viewport 左边的安全区域内设置量")]),t._v(" "),n("p",[t._v("constant(safe-area-inset-right) // 在 Viewport 右边的安全区域内设置量")]),t._v(" "),n("p",[t._v("env() 与兼容性")]),t._v(" "),n("p",[t._v("Webkit 在 iOS11 中新增 CSS 函数 env() 来替代 constant()，后者在 iOS11.2 Beta 中开始被弃用。因此考虑到兼容性，我们可以同时使用 env() 和 constant()。不支持 env() 的浏览器会自动忽略这一样式规则。")]),t._v(" "),n("h2",{attrs:{id:"事例代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事例代码"}},[t._v("#")]),t._v(" 事例代码")]),t._v(" "),n("p",[t._v("3-1 为 body 设置底部安全距离,底部没有导航之类的")]),t._v(" "),n("div",{staticClass:"language-css line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("3-2 为底部固定按钮设置安全距离，10px 是粘底高度具体具体设置\n// 结合 calc()")]),t._v(" "),n("div",{staticClass:"language-css line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".btn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("10px + "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("10px + "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h2",{attrs:{id:"注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),n("ul",[n("li",[t._v("先设置 meta 标签，viewport-fit=cover，safe-area-inset-*等属性才会起作用。")]),t._v(" "),n("li",[t._v("对底部固定按钮做 iPhoneX 适配时，若使用 padding-bottom 向外扩展距离，如果定高需要将 box-sizing 置为 content-box。")]),t._v(" "),n("li",[t._v("注意 bgcolor 。若底部固定按钮与页面背景色一致，可直接设置撑高整个页面；若不一致，需对按钮和 body 两处进行样式设置。")]),t._v(" "),n("li",[t._v("若配置 stylelint，包含规则 no-duplicate-selectors: 不允许重复的选择器。此时可以通过/_stylelint-disable-line _/关闭该行校验。")]),t._v(" "),n("li",[t._v("验证属性是否生效，有的模拟器无效果，需用 iPhoneX 真机调试验证。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);